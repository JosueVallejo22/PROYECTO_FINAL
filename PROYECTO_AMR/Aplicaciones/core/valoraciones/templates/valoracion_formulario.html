{% extends "base.html" %}
{% load static %}
{% block title %}Formulario de Valoración{% endblock %}
{% block content %}
<div class="container mt-4 mb-5"> <!-- Se agrega mb-5 para margen inferior -->
    <div class="card">
        <div class="card-header bg-success text-white text-center">
            <h4>Formulario de Valoración</h4>
        </div>
        <div class="card-body">
            <form id="valoracion-form" method="post">
                {% csrf_token %}
                
                <!-- Cabecera del formulario -->
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label for="jugador" class="form-label">Jugador</label>
                        <select id="jugador" class="form-control">
                            <option value="">-- Seleccione un jugador --</option>
                            {% for jugador in jugadores %}
                                <option value="{{ jugador.id }}">{{ jugador.nombre }} {{ jugador.apellido }}</option>
                            {% empty %}
                                <option value="">No hay jugadores disponibles</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label for="puesto" class="form-label">Puesto</label>
                        <input type="text" id="puesto" class="form-control" placeholder="Puesto del jugador" readonly>
                    </div>
                    <div class="col-md-2">
                        <label for="valoracion_final" class="form-label">Valoración Final</label>
                        <input type="text" id="valoracion_final" class="form-control" readonly>
                    </div>                    
                    <div class="col-md-3">
                        <label for="fecha" class="form-label">Fecha</label>
                        <input type="text" id="fecha" class="form-control" readonly value="{{ fecha_actual }}">
                    </div>
                    <div class="col-md-1">
                        <label for="hora" class="form-label">Hora</label>
                        <input type="text" id="hora" class="form-control" readonly value="{{ hora_actual }}">
                    </div>
                </div>

                <!-- Cálculos dinámicos en la cabecera -->
                <div class="card mt-4">
                    <div class="card-body">
                        <div class="row" id="calculos-container">
                            <p class="text-center">Seleccione un jugador para cargar los cálculos.</p>
                        </div>
                    </div>
                </div>

                <!-- Detalle de estadísticas -->
                <div class="card mt-4">
                    <div class="card-header bg-success text-white text-center">
                        <h5>Detalle de Estadísticas</h5>
                    </div>
                    <div class="card-body">
                        <div class="accordion" id="accordionEstadisticas">
                            <p class="text-center">Seleccione un jugador para cargar las estadísticas.</p>
                        </div>
                    </div>
                </div>

                <!-- Botones de acción -->
                <div class="row mt-4">
                    <div class="col-md-12 text-center">
                        <button type="submit" class="btn btn-success btn-lg fw-bold" id="guardar-btn" disabled>Guardar Valoración</button>
                        <a href="{% url 'valoraciones:modulo_valoraciones' %}" class="btn btn-danger btn-lg fw-bold">Regresar</a>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Espaciador adicional para evitar que el footer corte el contenido -->
<div class="mb-5"></div>

<script src="{% static 'js/obtencion_cualidades.js' %}"></script>
<script src="{% static 'js/validaciones.js' %}"></script>
<script src="{% static 'js/calculos_estadisticas.js' %}"></script>
{% endblock %}
